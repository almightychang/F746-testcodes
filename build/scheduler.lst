ARM GAS  /tmp/cckKcXt5.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"scheduler.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.addScheduler,"ax",%progbits
  20              		.align	1
  21              		.global	addScheduler
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	addScheduler:
  27              	.LVL0:
  28              	.LFB2:
  29              		.file 1 "fw-lib-stm32-CocktailOS/core/scheduler.c"
   1:fw-lib-stm32-CocktailOS/core/scheduler.c **** #include "scheduler.h"
   2:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
   3:fw-lib-stm32-CocktailOS/core/scheduler.c **** #include "stdlib.h"
   4:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
   5:fw-lib-stm32-CocktailOS/core/scheduler.c **** void
   6:fw-lib-stm32-CocktailOS/core/scheduler.c **** Cocktail_schedulePCB(Cocktail_PcbTypeDef *pcb)
   7:fw-lib-stm32-CocktailOS/core/scheduler.c **** {
   8:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_SchedulerTypeDef *sch;
   9:fw-lib-stm32-CocktailOS/core/scheduler.c ****     // TODO: find sch for pcb
  10:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  11:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_putPCB(sch, pcb);
  12:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
  13:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  14:fw-lib-stm32-CocktailOS/core/scheduler.c **** void
  15:fw-lib-stm32-CocktailOS/core/scheduler.c **** Cocktail_runScheduler(Cocktail_SchedulerTypeDef *sch)
  16:fw-lib-stm32-CocktailOS/core/scheduler.c **** {
  17:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_PcbTypeDef  *pcb;
  18:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_TaskTypeDef *task;
  19:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  20:fw-lib-stm32-CocktailOS/core/scheduler.c ****     pcb = Cocktail_getPCB(sch);
  21:fw-lib-stm32-CocktailOS/core/scheduler.c ****     if(pcb == NULL) return;
  22:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  23:fw-lib-stm32-CocktailOS/core/scheduler.c ****     task = Cocktail_getTask(pcb);
  24:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_runTask(task);
  25:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  26:fw-lib-stm32-CocktailOS/core/scheduler.c ****     if(Cocktail_currentTask(pcb) == NULL) Cocktail_freePCB(pcb);
  27:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else Cocktail_schedulePCB(pcb);
  28:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
  29:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
ARM GAS  /tmp/cckKcXt5.s 			page 2


  30:fw-lib-stm32-CocktailOS/core/scheduler.c **** Cocktail_SchedulerTypeDef *
  31:fw-lib-stm32-CocktailOS/core/scheduler.c **** addScheduler(void *peripheral)
  32:fw-lib-stm32-CocktailOS/core/scheduler.c **** {
  30              		.loc 1 32 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 32 1 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 0446     		mov	r4, r0
  33:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_SchedulerTypeDef *sch;
  41              		.loc 1 33 5 is_stmt 1 view .LVU2
  34:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  35:fw-lib-stm32-CocktailOS/core/scheduler.c ****     sch =
  42              		.loc 1 35 5 view .LVU3
  36:fw-lib-stm32-CocktailOS/core/scheduler.c ****         (Cocktail_SchedulerTypeDef *)malloc(sizeof(Cocktail_SchedulerTypeDef));
  43              		.loc 1 36 38 is_stmt 0 view .LVU4
  44 0004 0820     		movs	r0, #8
  45              	.LVL1:
  46              		.loc 1 36 38 view .LVU5
  47 0006 FFF7FEFF 		bl	malloc
  48              	.LVL2:
  37:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  38:fw-lib-stm32-CocktailOS/core/scheduler.c ****     sch->pcb_queue  = NULL;
  49              		.loc 1 38 5 is_stmt 1 view .LVU6
  50              		.loc 1 38 21 is_stmt 0 view .LVU7
  51 000a 0022     		movs	r2, #0
  52 000c 0260     		str	r2, [r0]
  39:fw-lib-stm32-CocktailOS/core/scheduler.c ****     sch->peripheral = peripheral;
  53              		.loc 1 39 5 is_stmt 1 view .LVU8
  54              		.loc 1 39 21 is_stmt 0 view .LVU9
  55 000e 4460     		str	r4, [r0, #4]
  40:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  41:fw-lib-stm32-CocktailOS/core/scheduler.c ****     return sch;
  56              		.loc 1 41 5 is_stmt 1 view .LVU10
  42:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
  57              		.loc 1 42 1 is_stmt 0 view .LVU11
  58 0010 10BD     		pop	{r4, pc}
  59              		.loc 1 42 1 view .LVU12
  60              		.cfi_endproc
  61              	.LFE2:
  63              		.section	.text.Cocktail_putPCB,"ax",%progbits
  64              		.align	1
  65              		.global	Cocktail_putPCB
  66              		.syntax unified
  67              		.thumb
  68              		.thumb_func
  70              	Cocktail_putPCB:
  71              	.LVL3:
  72              	.LFB3:
  43:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  44:fw-lib-stm32-CocktailOS/core/scheduler.c **** /**
  45:fw-lib-stm32-CocktailOS/core/scheduler.c ****  * @brief   Enqueue new_pcb into pcb_queue.
ARM GAS  /tmp/cckKcXt5.s 			page 3


  46:fw-lib-stm32-CocktailOS/core/scheduler.c ****  * @param   new_pcb pointer to Cocktail_PcbTypeDef that contains information
  47:fw-lib-stm32-CocktailOS/core/scheduler.c ****  *              for the process.
  48:fw-lib-stm32-CocktailOS/core/scheduler.c ****  * @param   sch pointer to a Cocktail_SchedulerTypeDef that contains information
  49:fw-lib-stm32-CocktailOS/core/scheduler.c ****  *              for scheduling.
  50:fw-lib-stm32-CocktailOS/core/scheduler.c ****  */
  51:fw-lib-stm32-CocktailOS/core/scheduler.c **** void
  52:fw-lib-stm32-CocktailOS/core/scheduler.c **** Cocktail_putPCB(Cocktail_SchedulerTypeDef *sch, Cocktail_PcbTypeDef *new_pcb)
  53:fw-lib-stm32-CocktailOS/core/scheduler.c **** {
  73              		.loc 1 53 1 is_stmt 1 view -0
  74              		.cfi_startproc
  75              		@ args = 0, pretend = 0, frame = 0
  76              		@ frame_needed = 0, uses_anonymous_args = 0
  77              		@ link register save eliminated.
  54:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_PcbTypeDef *pcb = sch->pcb_queue;
  78              		.loc 1 54 5 view .LVU14
  79              		.loc 1 54 26 is_stmt 0 view .LVU15
  80 0000 0368     		ldr	r3, [r0]
  81              	.LVL4:
  55:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  56:fw-lib-stm32-CocktailOS/core/scheduler.c ****     if(pcb == NULL) sch->pcb_queue = new_pcb;
  82              		.loc 1 56 5 is_stmt 1 view .LVU16
  83              		.loc 1 56 7 is_stmt 0 view .LVU17
  84 0002 1BB1     		cbz	r3, .L6
  57:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else
  58:fw-lib-stm32-CocktailOS/core/scheduler.c ****     {
  59:fw-lib-stm32-CocktailOS/core/scheduler.c ****         pcb->tail->next = new_pcb;
  85              		.loc 1 59 9 is_stmt 1 view .LVU18
  86              		.loc 1 59 12 is_stmt 0 view .LVU19
  87 0004 9A68     		ldr	r2, [r3, #8]
  88              		.loc 1 59 25 view .LVU20
  89 0006 5160     		str	r1, [r2, #4]
  60:fw-lib-stm32-CocktailOS/core/scheduler.c ****         pcb->tail       = new_pcb;
  90              		.loc 1 60 9 is_stmt 1 view .LVU21
  91              		.loc 1 60 25 is_stmt 0 view .LVU22
  92 0008 9960     		str	r1, [r3, #8]
  61:fw-lib-stm32-CocktailOS/core/scheduler.c ****     }
  62:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
  93              		.loc 1 62 1 view .LVU23
  94 000a 7047     		bx	lr
  95              	.L6:
  56:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else
  96              		.loc 1 56 21 is_stmt 1 discriminator 1 view .LVU24
  56:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else
  97              		.loc 1 56 36 is_stmt 0 discriminator 1 view .LVU25
  98 000c 0160     		str	r1, [r0]
  99 000e 7047     		bx	lr
 100              		.cfi_endproc
 101              	.LFE3:
 103              		.section	.text.Cocktail_schedulePCB,"ax",%progbits
 104              		.align	1
 105              		.global	Cocktail_schedulePCB
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 110              	Cocktail_schedulePCB:
 111              	.LVL5:
 112              	.LFB0:
ARM GAS  /tmp/cckKcXt5.s 			page 4


   7:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_SchedulerTypeDef *sch;
 113              		.loc 1 7 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
   7:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_SchedulerTypeDef *sch;
 117              		.loc 1 7 1 is_stmt 0 view .LVU27
 118 0000 08B5     		push	{r3, lr}
 119              	.LCFI1:
 120              		.cfi_def_cfa_offset 8
 121              		.cfi_offset 3, -8
 122              		.cfi_offset 14, -4
 123 0002 0146     		mov	r1, r0
   8:fw-lib-stm32-CocktailOS/core/scheduler.c ****     // TODO: find sch for pcb
 124              		.loc 1 8 5 is_stmt 1 view .LVU28
  11:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
 125              		.loc 1 11 5 view .LVU29
 126 0004 0020     		movs	r0, #0
 127              	.LVL6:
  11:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
 128              		.loc 1 11 5 is_stmt 0 view .LVU30
 129 0006 FFF7FEFF 		bl	Cocktail_putPCB
 130              	.LVL7:
  12:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
 131              		.loc 1 12 1 view .LVU31
 132 000a 08BD     		pop	{r3, pc}
 133              		.cfi_endproc
 134              	.LFE0:
 136              		.section	.text.Cocktail_getPCB,"ax",%progbits
 137              		.align	1
 138              		.global	Cocktail_getPCB
 139              		.syntax unified
 140              		.thumb
 141              		.thumb_func
 143              	Cocktail_getPCB:
 144              	.LVL8:
 145              	.LFB4:
  63:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  64:fw-lib-stm32-CocktailOS/core/scheduler.c **** /**
  65:fw-lib-stm32-CocktailOS/core/scheduler.c ****  * @brief   Dequeue pcb from pcb_queue.
  66:fw-lib-stm32-CocktailOS/core/scheduler.c ****  * @param   sch pointer to a Cocktail_SchedulerTypeDef that contains information
  67:fw-lib-stm32-CocktailOS/core/scheduler.c ****  *              for scheduling.
  68:fw-lib-stm32-CocktailOS/core/scheduler.c ****  * @retval  Cocktail_PcbTypeDef
  69:fw-lib-stm32-CocktailOS/core/scheduler.c ****  */
  70:fw-lib-stm32-CocktailOS/core/scheduler.c **** Cocktail_PcbTypeDef *
  71:fw-lib-stm32-CocktailOS/core/scheduler.c **** Cocktail_getPCB(Cocktail_SchedulerTypeDef *sch)
  72:fw-lib-stm32-CocktailOS/core/scheduler.c **** {
 146              		.loc 1 72 1 is_stmt 1 view -0
 147              		.cfi_startproc
 148              		@ args = 0, pretend = 0, frame = 0
 149              		@ frame_needed = 0, uses_anonymous_args = 0
 150              		@ link register save eliminated.
 151              		.loc 1 72 1 is_stmt 0 view .LVU33
 152 0000 0346     		mov	r3, r0
  73:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_PcbTypeDef *pcb = sch->pcb_queue;
 153              		.loc 1 73 5 is_stmt 1 view .LVU34
 154              		.loc 1 73 26 is_stmt 0 view .LVU35
ARM GAS  /tmp/cckKcXt5.s 			page 5


 155 0002 0068     		ldr	r0, [r0]
 156              	.LVL9:
  74:fw-lib-stm32-CocktailOS/core/scheduler.c ****     if(pcb == NULL) return NULL;
 157              		.loc 1 74 5 is_stmt 1 view .LVU36
 158              		.loc 1 74 7 is_stmt 0 view .LVU37
 159 0004 18B1     		cbz	r0, .L9
  75:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  76:fw-lib-stm32-CocktailOS/core/scheduler.c ****     sch->pcb_queue       = pcb->next;
 160              		.loc 1 76 5 is_stmt 1 view .LVU38
 161              		.loc 1 76 31 is_stmt 0 view .LVU39
 162 0006 4268     		ldr	r2, [r0, #4]
 163              		.loc 1 76 26 view .LVU40
 164 0008 1A60     		str	r2, [r3]
  77:fw-lib-stm32-CocktailOS/core/scheduler.c ****     sch->pcb_queue->tail = pcb->tail;
 165              		.loc 1 77 5 is_stmt 1 view .LVU41
 166              		.loc 1 77 31 is_stmt 0 view .LVU42
 167 000a 8368     		ldr	r3, [r0, #8]
 168              	.LVL10:
 169              		.loc 1 77 26 view .LVU43
 170 000c 9360     		str	r3, [r2, #8]
  78:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
  79:fw-lib-stm32-CocktailOS/core/scheduler.c ****     return pcb;
 171              		.loc 1 79 5 is_stmt 1 view .LVU44
 172              	.L9:
  80:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
 173              		.loc 1 80 1 is_stmt 0 view .LVU45
 174 000e 7047     		bx	lr
 175              		.cfi_endproc
 176              	.LFE4:
 178              		.section	.text.Cocktail_runScheduler,"ax",%progbits
 179              		.align	1
 180              		.global	Cocktail_runScheduler
 181              		.syntax unified
 182              		.thumb
 183              		.thumb_func
 185              	Cocktail_runScheduler:
 186              	.LVL11:
 187              	.LFB1:
  16:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_PcbTypeDef  *pcb;
 188              		.loc 1 16 1 is_stmt 1 view -0
 189              		.cfi_startproc
 190              		@ args = 0, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
  16:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_PcbTypeDef  *pcb;
 192              		.loc 1 16 1 is_stmt 0 view .LVU47
 193 0000 10B5     		push	{r4, lr}
 194              	.LCFI2:
 195              		.cfi_def_cfa_offset 8
 196              		.cfi_offset 4, -8
 197              		.cfi_offset 14, -4
  17:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_TaskTypeDef *task;
 198              		.loc 1 17 5 is_stmt 1 view .LVU48
  18:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
 199              		.loc 1 18 5 view .LVU49
  20:fw-lib-stm32-CocktailOS/core/scheduler.c ****     if(pcb == NULL) return;
 200              		.loc 1 20 5 view .LVU50
  20:fw-lib-stm32-CocktailOS/core/scheduler.c ****     if(pcb == NULL) return;
ARM GAS  /tmp/cckKcXt5.s 			page 6


 201              		.loc 1 20 11 is_stmt 0 view .LVU51
 202 0002 FFF7FEFF 		bl	Cocktail_getPCB
 203              	.LVL12:
  21:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
 204              		.loc 1 21 5 is_stmt 1 view .LVU52
  21:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
 205              		.loc 1 21 7 is_stmt 0 view .LVU53
 206 0006 58B1     		cbz	r0, .L11
 207 0008 0446     		mov	r4, r0
  23:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_runTask(task);
 208              		.loc 1 23 5 is_stmt 1 view .LVU54
  23:fw-lib-stm32-CocktailOS/core/scheduler.c ****     Cocktail_runTask(task);
 209              		.loc 1 23 12 is_stmt 0 view .LVU55
 210 000a FFF7FEFF 		bl	Cocktail_getTask
 211              	.LVL13:
  24:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
 212              		.loc 1 24 5 is_stmt 1 view .LVU56
 213 000e FFF7FEFF 		bl	Cocktail_runTask
 214              	.LVL14:
  26:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else Cocktail_schedulePCB(pcb);
 215              		.loc 1 26 5 view .LVU57
  26:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else Cocktail_schedulePCB(pcb);
 216              		.loc 1 26 8 is_stmt 0 view .LVU58
 217 0012 2046     		mov	r0, r4
 218 0014 FFF7FEFF 		bl	Cocktail_currentTask
 219              	.LVL15:
  26:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else Cocktail_schedulePCB(pcb);
 220              		.loc 1 26 7 view .LVU59
 221 0018 18B1     		cbz	r0, .L15
  27:fw-lib-stm32-CocktailOS/core/scheduler.c **** }
 222              		.loc 1 27 10 is_stmt 1 view .LVU60
 223 001a 2046     		mov	r0, r4
 224 001c FFF7FEFF 		bl	Cocktail_schedulePCB
 225              	.LVL16:
 226              	.L11:
  28:fw-lib-stm32-CocktailOS/core/scheduler.c **** 
 227              		.loc 1 28 1 is_stmt 0 view .LVU61
 228 0020 10BD     		pop	{r4, pc}
 229              	.LVL17:
 230              	.L15:
  26:fw-lib-stm32-CocktailOS/core/scheduler.c ****     else Cocktail_schedulePCB(pcb);
 231              		.loc 1 26 43 is_stmt 1 discriminator 1 view .LVU62
 232 0022 2046     		mov	r0, r4
 233 0024 FFF7FEFF 		bl	Cocktail_freePCB
 234              	.LVL18:
 235 0028 FAE7     		b	.L11
 236              		.cfi_endproc
 237              	.LFE1:
 239              		.text
 240              	.Letext0:
 241              		.file 2 "fw-lib-stm32-CocktailOS/core/task.h"
 242              		.file 3 "fw-lib-stm32-CocktailOS/core/pcb.h"
 243              		.file 4 "fw-lib-stm32-CocktailOS/core/scheduler.h"
 244              		.file 5 "/usr/share/gcc-arm-none-eabi-10.3-2021.10/arm-none-eabi/include/stdlib.h"
ARM GAS  /tmp/cckKcXt5.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 scheduler.c
     /tmp/cckKcXt5.s:20     .text.addScheduler:0000000000000000 $t
     /tmp/cckKcXt5.s:26     .text.addScheduler:0000000000000000 addScheduler
     /tmp/cckKcXt5.s:64     .text.Cocktail_putPCB:0000000000000000 $t
     /tmp/cckKcXt5.s:70     .text.Cocktail_putPCB:0000000000000000 Cocktail_putPCB
     /tmp/cckKcXt5.s:104    .text.Cocktail_schedulePCB:0000000000000000 $t
     /tmp/cckKcXt5.s:110    .text.Cocktail_schedulePCB:0000000000000000 Cocktail_schedulePCB
     /tmp/cckKcXt5.s:137    .text.Cocktail_getPCB:0000000000000000 $t
     /tmp/cckKcXt5.s:143    .text.Cocktail_getPCB:0000000000000000 Cocktail_getPCB
     /tmp/cckKcXt5.s:179    .text.Cocktail_runScheduler:0000000000000000 $t
     /tmp/cckKcXt5.s:185    .text.Cocktail_runScheduler:0000000000000000 Cocktail_runScheduler

UNDEFINED SYMBOLS
malloc
Cocktail_getTask
Cocktail_runTask
Cocktail_currentTask
Cocktail_freePCB
